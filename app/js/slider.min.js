export default class Slider{constructor(t){void 0===t&&(t={}),this._root="#slider",this._slides,this._slidesCount,this._next,this._prev,this._dots,this._counter,this._currentIndex=0,this.navigation=void 0===t.navigation||t.navigation,this.dots=void 0===t.dots||t.dots,this.counter=void 0===t.counter||t.counter,this.animation=void 0===t.animation?"fadeIn":t.animation,this.animationSpeed=void 0===t.animationSpeed?1800:t.animationSpeed,this.autoplay=void 0===t.autoplay||t.autoplay,this.autoplayReversed=void 0!==t.autoplayReversed&&t.autoplayReversed,this.autoplayTimeout=void 0===t.autoplayTimeout?5e3:t.autoplayTimeout,this.itemClass=void 0===t.itemClass?"":t.itemClass,this._isDev=!1}_test(){console.log(this)}_setRoot(t){void 0!==t&&t&&(this._root=t),this._slides=document.querySelectorAll(this._root+" .slider--item"),this._slidesCount=this._slides.length,this._next=document.querySelector(this._root+" .slider--next"),this._prev=document.querySelector(this._root+" .slider--previous"),this._dots=document.querySelector(this._root+" .slider--dots"),this._counter=document.querySelector(this._root+" .slider--counter")}_getIndex(){return this._currentIndex}_setIndex(t){!t&&0!==t||(this._currentIndex=t)}_initDots(){if(this._dots&&!0===this.dots)for(let s=0;s<this._slidesCount;s++){let t=document.createElement("button");0===s&&t.classList.add("active"),t.classList.add("slider--dot"),t.setAttribute("dotIndex",s),this._dots.appendChild(t)}}_activeDot(){if(this._dots&&!0===this.dots){let t=[...this._dots.children];t.forEach(t=>{t.classList.remove("active")}),t[this._getIndex()].classList.add("active")}}_handlePrev(){0===this._getIndex()?this._setIndex(this._slidesCount-1):this._setIndex(this._getIndex()-1),this._updateSlider()}_handleNext(){(this._getIndex()+1)%this._slidesCount==0?this._setIndex(0):this._setIndex(this._getIndex()+1),this._updateSlider()}_handleDot(t){this._setIndex(t),this._updateSlider()}_isNavigation(){if(!1===this.navigation)return 0;this._next&&(this._prev.style.display="block"),this._prev&&(this._next.style.display="block")}_hideDots(){if(!0===this.dots)return 0;this._dots.remove()}_Counter(){if(!1===this.counter)return 0;this._counter&&(this._counter.innerHTML=`<span class="slider--counter__current">${String(this._getIndex()<10?"0"+(this._getIndex()+1):this._getIndex()+1)} </span> <span class="slider--counter__divider"> / </span> <span class="slider--counter__total"> ${String(this._slidesCount<10?"0"+this._slidesCount:this._slidesCount)}</span>`)}_isAutoplay(){if(!1===this.autoplay)return 0;let t=setTimeout(s.bind(this),this.autoplayTimeout);function s(){this.autoplayReversed?this._handlePrev():this._handleNext(),t=setTimeout(s.bind(this),this.autoplayTimeout)}}_addAnimation(){this._slides.forEach(t=>{t.style.animation=`${this.animation} ${this.animationSpeed}ms`})}_isItemClass(){if(""===this.itemClass)return 0;this._slides.forEach(t=>{t.classList.add(this.itemClass)})}_updateSlider(){0!==this._slides&&(this._slides.forEach(t=>{t.classList.remove("slider--item__active")}),this._slides[this._getIndex()].classList.add("slider--item__active"),this._activeDot(),this._Counter()),this._isDev&&this._test()}show(t){if(this._setRoot(t),this.dots?this._initDots():this._hideDots(),this._isNavigation(),this._isAutoplay(),this._isItemClass(),this._Counter(),this._addAnimation(),0!==this._slides.length&&(this._slides.forEach(t=>{t.classList.remove("slider--item__active")}),this._slides[this._getIndex()].classList.add("slider--item__active")),this._next&&this._next.addEventListener("click",t=>{this._handleNext()}),this._prev&&this._prev.addEventListener("click",t=>{this._handlePrev()}),this._dots){let t=[...this._dots.children];t.forEach(t=>{let s=t.getAttribute("dotIndex");t.addEventListener("click",t=>{this._handleDot(Number(s))})})}this._root&&addEventListener("keydown",function(t){37===t.keyCode&&this._handlePrev(),39===t.keyCode&&this._handleNext()}.bind(this))}}